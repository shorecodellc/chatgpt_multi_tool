Creating and running a macOS virtual machine in Oracle VirtualBox can be a bit tricky due to Apple's software licensing restrictions, which limit the installation of macOS on non-Apple hardware. However, for educational purposes or software development (especially if you're aiming to develop for the Apple ecosystem and you own a Mac), here's a general guide on how to set up a macOS virtual machine using Oracle VirtualBox. This guide assumes you're doing this on a system you legally own and for purposes that comply with Apple's licensing agreements.

### Step 1: Download VirtualBox and the Extension Pack

1. Download the latest version of Oracle VirtualBox for your platform from the [official website](https://www.virtualbox.org/wiki/Downloads).
2. Install VirtualBox on your system.
3. Download the VirtualBox Extension Pack from the same page and install it by clicking on the downloaded file and following the prompts in VirtualBox.

### Step 2: Obtain macOS Installation Files

To create a macOS virtual machine, you need the macOS installer. You can obtain this from the Mac App Store or via direct download links available online for developers. For example, to download macOS Monterey or Sonoma, you can use a Mac to download the installer from the App Store. The process might vary based on the macOS version, so ensure you're following the appropriate steps for obtaining the installer for your desired macOS version.

### Step 3: Create an ISO from the macOS Installer

After downloading the macOS installer, you need to convert it to an ISO file. This step is done on a Mac:

1. Open the Terminal.
2. Use the `createinstallmedia` command to create a bootable installer. The command varies slightly depending on the macOS version. You can find the specific command for your macOS version in Apple's official support documentation.
3. Convert the bootable installer to an ISO file with commands like:

```bash
hdiutil create -o /tmp/macOS -size 8500m -volname macOS -layout SPUD -fs HFS+J
hdiutil attach /tmp/macOS.dmg -noverify -mountpoint /Volumes/macOS
sudo /Applications/Install\ macOS\ [version]/Contents/Resources/createinstallmedia --volume /Volumes/macOS --nointeraction
hdiutil detach /volumes/Install\ macOS\ [version]
hdiutil convert /tmp/macOS.dmg -format UDTO -o ~/Desktop/macOS.iso
```

Replace `[version]` with the name of your macOS version, such as `Monterey` or `Sonoma`.

### Step 4: Create a New Virtual Machine in VirtualBox

1. Open VirtualBox and click "New" to create a new virtual machine.
2. Name your VM and select "Mac OS X" for the type and "Mac OS X (64-bit)" for the version.
3. Allocate memory (RAM) to the VM. It's recommended to allocate at least 4GB of RAM, but more is better if you have enough available.
4. Create a new virtual hard disk. Choose VDI for the hard disk file type and allocate as much space as you think you'll need for your purposes, with 50GB being a reasonable minimum.

### Step 5: Adjust the VM Settings

1. Go to the VM settings, and under "System," uncheck "Floppy" in the boot order and enable EFI.
2. Under "Processor," allocate more CPUs if possible, depending on your host system's capabilities.
3. In the "Display" settings, increase the video memory to the maximum allowed.
4. Under "Storage," click on the "Empty" CD icon, then click the CD icon on the right side to choose a virtual optical disk file. Select the macOS ISO you created.

### Step 6: Run Commands to Configure the VM

Oracle VirtualBox needs specific configurations for macOS VMs to work correctly. Open a terminal or command prompt on your host machine, navigate to the VirtualBox installation directory, and run the following commands, replacing "Your_VM_Name" with the name of your macOS VM:

```bash
VBoxManage modifyvm "Your_VM_Name" --cpuidset 00000001 000106e5 00100800 0098e3fd bfebfbff
VBoxManage setextradata "Your_VM_Name" "VBoxInternal/Devices/efi/0/Config/DmiSystemProduct" "iMac11,3"
VBoxManage setextradata "Your_VM_Name" "VBoxInternal/Devices/efi/0/Config/DmiSystemVersion" "1.0"
VBoxManage setextradata "Your_VM_Name" "VBoxInternal/Devices/efi/0/Config/DmiBoardProduct" "Iloveapple"
VBoxManage setextradata "Your_VM_Name" "VBoxInternal/Devices/smc/0/Config/DeviceKey" "ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc"
VBoxManage setextradata "Your_VM_Name" "VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC" 1
```

### Step 7: Start the Virtual Machine

1. Start the VM in VirtualBox.
2. Follow the on-screen instructions to install macOS. This process involves formatting the virtual hard disk using Disk Utility and then installing macOS onto that disk.

### Further Information

- **VirtualBox Documentation:** For more detailed instructions and troubleshooting, refer to the [official VirtualBox documentation](https://www.virtualbox.org/manual/).

### Warnings

- **Legal Considerations:** Ensure you comply with Apple's software licensing agreements when installing macOS on non-Apple hardware.
- **Performance:** Running macOS in a VM may not provide the same performance as running it on a physical Mac due to the virtualization overhead and hardware limitations.

This guide provides a general overview, and specific steps may vary based on the macOS version and your hardware. Always refer to the most current guides and resources specific to the macOS version you're installing.